#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# pawaox4th@gmail.con

echo "â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼"
echo "ğŸ§ğŸ§ğŸ§ RUN AS : $(date +%d/%m/%Y-%H:%M:%S) ğŸ§ğŸ§ğŸ§"
echo "â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼"
echo "Styling, linting, testing and building your project before committing [Pre-Push]
";

# Check tsconfig standards
yarn check:types ||
(
    echo 'âŒâŒâŒ Failed Type check. âŒâŒâŒ
            Are you seriously trying to write that? Make the changes required above.'
    false;
)

yarn check:eslint ||
(
        echo 'ğŸ™…â€â™€ï¸ğŸ™…â€â™€ï¸ğŸ™…â€â™€ï¸ Get that weak shit out of here! ğŸ™…â€â™€ï¸ğŸ™…â€â™€ï¸ğŸ™…â€â™€ï¸
                ESLint Check Failed. Make the required changes listed above, add changes and try to commit again.'
        false; 
)

# Check Format Stylelint standards  
# yarn check:stylelint ||

# (
#     echo 'ğŸ˜µğŸ˜µğŸ˜µ Your styling looks BAD. ğŸ˜µğŸ˜µğŸ˜µ
#             Run [yarn format:stylelint], add changes and try commit again.';
#     false;
# )

# yarn check:eslint:dev ||
# (
#         echo 'ğŸ˜¤ğŸ€ğŸ‘‹ğŸ˜¤ Get that weak shit out of here! ğŸ˜¤ğŸ€ğŸ‘‹ğŸ˜¤ 
#                 ESLint Check Failed. Make the required changes listed above, add changes and try to commit again.'
#         false; 
# )

yarn test ||
(
    echo 'ğŸ§ªğŸ§ªğŸ§ª Report from coverage ğŸ§ªğŸ§ªğŸ§ª'
    false;
)

# If everything passes... Now we can commit
echo 'ğŸ‘ğŸ‘ğŸ‘ Your code is passed! I am building. ğŸ‘ğŸ‘ğŸ‘'
echo 'Please waiting, take a sip of coffee and relax...'

yarn build:dev ||
(
    echo 'ğŸ˜²ğŸ˜²ğŸ˜² Oops!! Failed building ğŸ˜²ğŸ˜²ğŸ˜²
            Next build failed: View the errors above to see why. 
    '
    false;
)

# # If everything passes... Now we can commit
echo 'ğŸš€ğŸš€ You win this time... I am pushed this now. ğŸš€ğŸš€'
echo "ğŸ‰ğŸ‰ğŸ‰ FINISH AT : $(date +%d/%m/%Y-%H:%M:%S) ğŸ‰ğŸ‰ğŸ‰"
echo "â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼â¼"